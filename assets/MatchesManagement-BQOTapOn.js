import{j as e}from"./ui-core-KiA6hiHm.js";import{r as h,b as I}from"./react-vendor-rxUfhwR6.js";import{C as M}from"./card-CL2ZgO-Q.js";import{B as d}from"./button-DRU12jmU.js";import{t as f}from"./index-BPKutU3E.js";import{D as N,a as y,b as C,c as w,e as b,d as O}from"./dialog-DEHK0m-s.js";import{S as E,a as J,b as z,c as A,d as j}from"./select-ChV4jWT9.js";import{L as l,I as n}from"./label-CLFdfYuE.js";import{y as B,C as H,T as G,z as L,B as P}from"./ui-utils-DFR8Oa4B.js";import"./data-management-Q5I3kbSf.js";const Z=()=>{var v,p;const[S,o]=h.useState([]),[u,c]=h.useState(!1),[a,t]=h.useState(null),[g,m]=h.useState(null);I.useEffect(()=>{const s=localStorage.getItem("matches");s&&o(JSON.parse(s))},[]);const T=()=>{const s={id:Date.now().toString(),homeTeam:"",awayTeam:"",date:"",time:"",venue:"",competition:"",status:"scheduled"};t(s),c(!0)},D=s=>{t(s),c(!0)},k=s=>{s.id?o(r=>{const i=r.map(x=>x.id===s.id?s:x);return localStorage.setItem("matches",JSON.stringify(i)),i}):o(r=>{const i=[...r,{...s,id:Date.now().toString()}];return localStorage.setItem("matches",JSON.stringify(i)),i}),c(!1),t(null),f({title:"Успешно сохранено",description:"Матч был успешно сохранен"})},F=s=>{o(r=>{const i=r.filter(x=>x.id!==s);return localStorage.setItem("matches",JSON.stringify(i)),i}),m(null),f({title:"Удалено",description:"Матч был успешно удален",variant:"destructive"})};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Управление матчами"}),e.jsxs(d,{onClick:T,className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(B,{className:"mr-2 h-4 w-4"})," Добавить матч"]})]}),e.jsx("div",{className:"grid gap-6",children:S.map(s=>{var r,i;return e.jsx(M,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.status==="live"?"bg-fc-green text-white":s.status==="finished"?"bg-gray-200 text-gray-700":"bg-fc-yellow text-gray-900"}`,children:s.status==="live"?"Идет матч":s.status==="finished"?"Завершен":"Запланирован"}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.date," ",s.time]})]})]}),e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"text-lg font-semibold",children:s.homeTeam})}),e.jsxs("div",{className:"flex items-center gap-3",children:[s.status!=="scheduled"&&e.jsxs("div",{className:"text-2xl font-bold",children:[(r=s.score)==null?void 0:r.home," - ",(i=s.score)==null?void 0:i.away]}),s.status==="scheduled"&&e.jsx("div",{className:"text-xl font-bold",children:"vs"})]}),e.jsx("div",{className:"flex-1 text-right",children:e.jsx("div",{className:"text-lg font-semibold",children:s.awayTeam})})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4"}),s.competition]}),e.jsx("div",{children:s.venue})]})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>D(s),children:[e.jsx(L,{className:"h-4 w-4 mr-1"})," Изменить"]}),e.jsxs(d,{variant:"ghost",size:"sm",onClick:()=>m(s.id),className:"text-fc-red hover:text-fc-red/80",children:[e.jsx(P,{className:"h-4 w-4 mr-1"})," Удалить"]})]})]})},s.id)})}),u&&a&&e.jsx(N,{open:u,onOpenChange:()=>c(!1),children:e.jsxs(y,{className:"max-w-2xl",children:[e.jsx(C,{children:e.jsx(w,{children:a.id?"Редактировать матч":"Добавить новый матч"})}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"homeTeam",children:"Домашняя команда"}),e.jsx(n,{id:"homeTeam",value:a.homeTeam,onChange:s=>t({...a,homeTeam:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"awayTeam",children:"Гостевая команда"}),e.jsx(n,{id:"awayTeam",value:a.awayTeam,onChange:s=>t({...a,awayTeam:s.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"date",children:"Дата"}),e.jsx(n,{id:"date",type:"date",value:a.date,onChange:s=>t({...a,date:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"time",children:"Время"}),e.jsx(n,{id:"time",type:"time",value:a.time,onChange:s=>t({...a,time:s.target.value})})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"venue",children:"Стадион"}),e.jsx(n,{id:"venue",value:a.venue,onChange:s=>t({...a,venue:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"competition",children:"Соревнование"}),e.jsx(n,{id:"competition",value:a.competition,onChange:s=>t({...a,competition:s.target.value})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{children:"Статус матча"}),e.jsxs(E,{value:a.status,onValueChange:s=>t({...a,status:s}),children:[e.jsx(J,{children:e.jsx(z,{})}),e.jsxs(A,{children:[e.jsx(j,{value:"scheduled",children:"Запланирован"}),e.jsx(j,{value:"live",children:"Идет матч"}),e.jsx(j,{value:"finished",children:"Завершен"})]})]})]}),a.status!=="scheduled"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"scoreHome",children:"Голы (хозяева)"}),e.jsx(n,{id:"scoreHome",type:"number",min:"0",value:((v=a.score)==null?void 0:v.home)||0,onChange:s=>t({...a,score:{...a.score,home:parseInt(s.target.value)||0}})})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(l,{htmlFor:"scoreAway",children:"Голы (гости)"}),e.jsx(n,{id:"scoreAway",type:"number",min:"0",value:((p=a.score)==null?void 0:p.away)||0,onChange:s=>t({...a,score:{...a.score,away:parseInt(s.target.value)||0}})})]})]})]}),e.jsxs(b,{children:[e.jsx(d,{variant:"outline",onClick:()=>c(!1),children:"Отмена"}),e.jsx(d,{onClick:()=>k(a),className:"bg-fc-green hover:bg-fc-darkGreen",children:"Сохранить"})]})]})}),e.jsx(N,{open:!!g,onOpenChange:()=>m(null),children:e.jsxs(y,{children:[e.jsxs(C,{children:[e.jsx(w,{children:"Подтвердите удаление"}),e.jsx(O,{children:"Вы уверены, что хотите удалить этот матч? Это действие нельзя отменить."})]}),e.jsxs(b,{children:[e.jsx(d,{variant:"outline",onClick:()=>m(null),children:"Отмена"}),e.jsx(d,{variant:"destructive",onClick:()=>g&&F(g),children:"Удалить"})]})]})})]})};export{Z as default};
//# sourceMappingURL=MatchesManagement-BQOTapOn.js.map
