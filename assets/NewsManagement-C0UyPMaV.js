import{j as e}from"./ui-core-KiA6hiHm.js";import{r as n}from"./react-vendor-rxUfhwR6.js";import{C as u,a as E,b as T}from"./card-CL2ZgO-Q.js";import{B as l}from"./button-DRU12jmU.js";import{t as m}from"./index-BPKutU3E.js";import{D as q,a as L,b as I,c as R,d as z,e as B}from"./dialog-DEHK0m-s.js";import{L as i,I as j}from"./label-CLFdfYuE.js";import{T as N}from"./textarea-DFurvIRQ.js";import{S as M,a as P,b as U,c as A,d as w}from"./select-ChV4jWT9.js";import{X as G,x as H,N as V,y as C,z as O,B as X}from"./ui-utils-DFR8Oa4B.js";import{g as f,d as $,u as J,c as K}from"./newsOperations-Yq9_nnMg.js";import"./data-management-Q5I3kbSf.js";const Q=({news:c,onSave:d,onCancel:g})=>{const[t,x]=n.useState(c),a=r=>{const{name:h,value:v}="target"in r?r.target:r;x(p=>({...p,[h]:v}))},o=r=>{r.preventDefault(),d(t)};return e.jsx("form",{onSubmit:o,children:e.jsxs(u,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"title",children:"Заголовок"}),e.jsx(j,{id:"title",name:"title",value:t.title,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"excerpt",children:"Краткое описание"}),e.jsx(N,{id:"excerpt",name:"excerpt",value:t.excerpt,onChange:a,required:!0,rows:3})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"content",children:"Содержание новости"}),e.jsx(N,{id:"content",name:"content",value:t.content,onChange:a,required:!0,rows:10})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"image",children:"URL изображения"}),e.jsx(j,{id:"image",name:"image",value:t.image,onChange:a,required:!0}),t.image&&e.jsx("div",{className:"mt-2 rounded-lg overflow-hidden aspect-video",children:e.jsx("img",{src:t.image,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"category",children:"Категория"}),e.jsxs(M,{value:t.category,onValueChange:r=>a({name:"category",value:r}),children:[e.jsx(P,{children:e.jsx(U,{})}),e.jsxs(A,{children:[e.jsx(w,{value:"matches",children:"Матчи"}),e.jsx(w,{value:"club",children:"Клуб"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(i,{htmlFor:"date",children:"Дата"}),e.jsx(j,{id:"date",name:"date",type:"text",value:t.date,onChange:a,required:!0})]}),e.jsxs("div",{children:[e.jsx(i,{htmlFor:"time",children:"Время"}),e.jsx(j,{id:"time",name:"time",type:"text",value:t.time,onChange:a,required:!0})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6 pt-4 border-t",children:[e.jsxs(l,{variant:"outline",type:"button",onClick:g,children:[e.jsx(G,{className:"mr-2 h-4 w-4"})," Отмена"]}),e.jsxs(l,{type:"submit",className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(H,{className:"mr-2 h-4 w-4"})," Сохранить"]})]})]})})},ce=()=>{const[c,d]=n.useState([]),[g,t]=n.useState(!1),[x,a]=n.useState(null),[o,r]=n.useState(null);n.useEffect(()=>{d(f())},[]);const h=()=>{const s={id:`news-${Date.now()}`,title:"",excerpt:"",content:"",category:"club",date:new Date().toLocaleDateString("ru-RU"),time:new Date().toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"}),image:"",views:0};a(s),t(!0)},v=s=>{a(s),t(!0)},p=s=>{r(s)},b=()=>{if(o){try{$(o),d(f()),m({title:"Новость удалена",description:"Новость была успешно удалена"})}catch{m({variant:"destructive",title:"Ошибка",description:"Не удалось удалить новость"})}r(null)}},y=s=>{try{c.some(F=>F.id===s.id)?(J(s),m({title:"Новость обновлена",description:"Новость успешно обновлена"})):(K(s),m({title:"Новость добавлена",description:"Новая новость успешно добавлена"})),d(f()),t(!1),a(null)}catch{m({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить новость"})}},D=()=>{t(!1),a(null)},S=()=>{r(null)};return e.jsxs("div",{children:[e.jsx(u,{className:"mb-8 bg-gradient-to-br from-white to-gray-50",children:e.jsxs(E,{className:"flex flex-row items-center justify-between",children:[e.jsx(T,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-fc-green mr-3 flex items-center justify-center",children:e.jsx(V,{className:"h-4 w-4 text-white"})}),e.jsx("span",{children:"Управление новостями"})]})}),e.jsxs(l,{onClick:h,className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(C,{className:"mr-2 h-4 w-4"})," Добавить новость"]})]})}),g&&x?e.jsx(Q,{news:x,onSave:y,onCancel:D}):e.jsxs("div",{className:"grid gap-4",children:[c.map(s=>e.jsx(u,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-lg overflow-hidden",children:e.jsx("img",{src:s.image||"/placeholder.svg",alt:s.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-2",children:s.excerpt}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs mr-2",children:s.category==="matches"?"Матчи":"Клуб"}),e.jsxs("span",{children:[s.date," ",s.time]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>v(s),className:"text-gray-500 hover:text-gray-700",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(l,{variant:"ghost",size:"icon",onClick:()=>p(s.id),className:"text-red-500 hover:text-red-700",children:e.jsx(X,{className:"h-4 w-4"})})]})]})},s.id)),c.length===0&&e.jsxs(u,{className:"p-12 text-center",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"Новости не найдены"}),e.jsxs(l,{onClick:h,variant:"outline",children:[e.jsx(C,{className:"mr-2 h-4 w-4"})," Добавить первую новость"]})]})]}),e.jsx(q,{open:!!o,onOpenChange:()=>r(null),children:e.jsxs(L,{children:[e.jsxs(I,{children:[e.jsx(R,{children:"Подтверждение удаления"}),e.jsx(z,{children:"Вы уверены, что хотите удалить эту новость? Это действие нельзя будет отменить."})]}),e.jsxs(B,{children:[e.jsx(l,{variant:"outline",onClick:S,children:"Отмена"}),e.jsx(l,{variant:"destructive",onClick:b,children:"Удалить"})]})]})})]})};export{ce as default};
//# sourceMappingURL=NewsManagement-C0UyPMaV.js.map
