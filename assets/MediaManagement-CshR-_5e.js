import{j as e}from"./ui-core-KiA6hiHm.js";import{r as c}from"./react-vendor-rxUfhwR6.js";import{C as g,a as L,b as V}from"./card-CL2ZgO-Q.js";import{B as i}from"./button-DRU12jmU.js";import{t as m}from"./index-BPKutU3E.js";import{D as q,a as R,b as T,c as z,d as B,e as P}from"./dialog-DEHK0m-s.js";import{L as n,I as j}from"./label-CLFdfYuE.js";import{S as b,a as y,b as C,c as w,d as r}from"./select-ChV4jWT9.js";import{X as U,x as A,o as G,y as D,V as H,z as O,B as X}from"./ui-utils-DFR8Oa4B.js";import{g as N,d as $,u as J,c as K}from"./mediaOperations-BoV-6Pja.js";import"./data-management-Q5I3kbSf.js";const Q=({media:d,onSave:o,onCancel:v})=>{const[a,x]=c.useState(d),l=t=>{const{name:u,value:f}="target"in t?t.target:t;x(p=>({...p,[u]:f}))},h=t=>{t.preventDefault(),o(a)};return e.jsx("form",{onSubmit:h,children:e.jsxs(g,{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"title",children:"Заголовок"}),e.jsx(j,{id:"title",name:"title",value:a.title,onChange:l,required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"type",children:"Тип медиа"}),e.jsxs(b,{value:a.type,onValueChange:t=>l({name:"type",value:t}),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(w,{children:[e.jsx(r,{value:"image",children:"Фото"}),e.jsx(r,{value:"video",children:"Видео"})]})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"category",children:"Категория"}),e.jsxs(b,{value:a.category,onValueChange:t=>l({name:"category",value:t}),children:[e.jsx(y,{children:e.jsx(C,{})}),e.jsxs(w,{children:[e.jsx(r,{value:"match",children:"Матчи"}),e.jsx(r,{value:"training",children:"Тренировки"}),e.jsx(r,{value:"interview",children:"Интервью"}),e.jsx(r,{value:"stadium",children:"Стадион"}),e.jsx(r,{value:"academy",children:"Академия"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"thumbnail",children:"URL миниатюры"}),e.jsx(j,{id:"thumbnail",name:"thumbnail",value:a.thumbnail,onChange:l,required:!0}),a.thumbnail&&e.jsx("div",{className:"mt-2 rounded-lg overflow-hidden aspect-video",children:e.jsx("img",{src:a.thumbnail,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsxs("div",{children:[e.jsxs(n,{htmlFor:"url",children:["URL ",a.type==="video"?"видео":"изображения"]}),e.jsx(j,{id:"url",name:"url",value:a.url,onChange:l,required:!0})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"date",children:"Дата"}),e.jsx(j,{id:"date",name:"date",type:"text",value:a.date,onChange:l,required:!0})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6 pt-4 border-t",children:[e.jsxs(i,{variant:"outline",type:"button",onClick:v,children:[e.jsx(U,{className:"mr-2 h-4 w-4"})," Отмена"]}),e.jsxs(i,{type:"submit",className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(A,{className:"mr-2 h-4 w-4"})," Сохранить"]})]})]})})},ne=()=>{const[d,o]=c.useState([]),[v,a]=c.useState(!1),[x,l]=c.useState(null),[h,t]=c.useState(null);c.useEffect(()=>{o(N())},[]);const u=()=>{const s={id:`media-${Date.now()}`,type:"image",title:"",date:new Date().toLocaleDateString("ru-RU"),thumbnail:"",url:"",category:"match"};l(s),a(!0)},f=s=>{l(s),a(!0)},p=s=>{t(s)},S=()=>{if(h){try{$(h),o(N()),m({title:"Медиафайл удален",description:"Медиафайл был успешно удален"})}catch{m({variant:"destructive",title:"Ошибка",description:"Не удалось удалить медиафайл"})}t(null)}},M=s=>{try{d.some(I=>I.id===s.id)?(J(s),m({title:"Медиафайл обновлен",description:"Медиафайл успешно обновлен"})):(K(s),m({title:"Медиафайл добавлен",description:"Новый медиафайл успешно добавлен"})),o(N()),a(!1),l(null)}catch{m({variant:"destructive",title:"Ошибка",description:"Не удалось сохранить медиафайл"})}},k=()=>{a(!1),l(null)},E=()=>{t(null)};return e.jsxs("div",{children:[e.jsx(g,{className:"mb-8 bg-gradient-to-br from-white to-gray-50",children:e.jsxs(L,{className:"flex flex-row items-center justify-between",children:[e.jsx(V,{children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-fc-green mr-3 flex items-center justify-center",children:e.jsx(G,{className:"h-4 w-4 text-white"})}),e.jsx("span",{children:"Медиагалерея"})]})}),e.jsxs(i,{onClick:u,className:"bg-fc-green hover:bg-fc-darkGreen",children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," Добавить медиафайл"]})]})}),v&&x?e.jsx(Q,{media:x,onSave:M,onCancel:k}):e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[d.map(s=>e.jsxs(g,{className:"relative group",children:[e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover rounded-t-lg"}),s.type==="video"&&e.jsx("div",{className:"absolute inset-0 bg-black/30 flex items-center justify-center",children:e.jsx(H,{className:"h-12 w-12 text-white"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"font-medium mb-1 line-clamp-1",children:s.title}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx("span",{className:"px-2 py-1 rounded-full bg-gray-100 text-xs",children:s.category}),e.jsx("span",{className:"ml-2",children:s.date})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>f(s),className:"text-gray-500 hover:text-gray-700",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(i,{variant:"ghost",size:"icon",onClick:()=>p(s.id),className:"text-red-500 hover:text-red-700",children:e.jsx(X,{className:"h-4 w-4"})})]})]})]})]},s.id)),d.length===0&&e.jsxs(g,{className:"col-span-full p-12 text-center",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"Медиафайлы не найдены"}),e.jsxs(i,{onClick:u,variant:"outline",children:[e.jsx(D,{className:"mr-2 h-4 w-4"})," Добавить первый медиафайл"]})]})]}),e.jsx(q,{open:!!h,onOpenChange:()=>t(null),children:e.jsxs(R,{children:[e.jsxs(T,{children:[e.jsx(z,{children:"Подтверждение удаления"}),e.jsx(B,{children:"Вы уверены, что хотите удалить этот медиафайл? Это действие нельзя будет отменить."})]}),e.jsxs(P,{children:[e.jsx(i,{variant:"outline",onClick:E,children:"Отмена"}),e.jsx(i,{variant:"destructive",onClick:S,children:"Удалить"})]})]})})]})};export{ne as default};
//# sourceMappingURL=MediaManagement-CshR-_5e.js.map
